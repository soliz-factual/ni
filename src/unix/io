ni('ni:/lib/branch')->new('/unix/io.b')
  ->def('/unix/io_stream.b',
    into => fn q{
      local $_;
      my ($self, $dest, $each) = @_;
      my $block_size = $self->read_size;
      while (defined($self->read($_, $block_size))) {
        &$each($_) if defined $each;
        $dest->write($_);
      }
    })

  ->def('/unix/io_constructors.b',
    '(+' => fn q{ni('ni:/unix/cat')->new(@_)})

  ->def('/unix/io_readers.b',
    '(<>'  => fn q{my $fh = shift->read_fh; <$fh>},
    '(@{}' => fn q{my $fh = shift->read_fh; [<$fh>]});
